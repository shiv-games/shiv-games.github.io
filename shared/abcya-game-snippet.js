!function(){"use strict";const e={log:"log",debug:"debug",info:"info",warn:"warn",error:"error"},t=console,n={};Object.keys(e).forEach(e=>{n[e]=t[e]});const o="Datadog Browser SDK:",r={debug:n.debug.bind(t,o),log:n.log.bind(t,o),info:n.info.bind(t,o),warn:n.warn.bind(t,o),error:n.error.bind(t,o)},s="https://docs.datadoghq.com",i=`${s}/real_user_monitoring/browser/troubleshooting`,a="More details:";function c(e,t){return(...n)=>{try{return e(...n)}catch(e){r.error(t,e)}}}let u,l=!1;function d(e){l=e}function f(e){return function(){return p(e,this,arguments)}}function p(e,t,n){try{return e.apply(t,n)}catch(e){g(e)}}function g(e){if(m(e),u)try{u(e)}catch(e){m(e)}}function m(...e){l&&r.error("[MONITOR]",...e)}function y(){if("object"==typeof globalThis)return globalThis;Object.defineProperty(Object.prototype,"_dd_temp_",{get(){return this},configurable:!0});let e=_dd_temp_;return delete Object.prototype._dd_temp_,"object"!=typeof e&&(e="object"==typeof self?self:"object"==typeof window?window:{}),e}function b(e){const t=window.queueMicrotask;"function"==typeof t?t(f(e)):Promise.resolve().then(f(e))}class h{constructor(e){this.onFirstSubscribe=e,this.observers=[]}subscribe(e){return this.addObserver(e),{unsubscribe:()=>this.removeObserver(e)}}notify(e){this.observers.forEach(t=>t(e))}addObserver(e){this.observers.push(e),1===this.observers.length&&this.onFirstSubscribe&&(this.onLastUnsubscribe=this.onFirstSubscribe(this)||void 0)}removeObserver(e){this.observers=this.observers.filter(t=>e!==t),!this.observers.length&&this.onLastUnsubscribe&&this.onLastUnsubscribe()}}function v(...e){return new h(t=>{const n=e.map(e=>e.subscribe(e=>t.notify(e)));return()=>n.forEach(e=>e.unsubscribe())})}class w extends h{constructor(e){super(),this.maxBufferSize=e,this.buffer=[]}notify(e){this.buffer.push(e),this.buffer.length>this.maxBufferSize&&this.buffer.shift(),super.notify(e)}subscribe(e){let t=!1;const n={unsubscribe:()=>{t=!0,this.removeObserver(e)}};return b(()=>{for(const n of this.buffer){if(t)return;e(n)}t||this.addObserver(e)}),n}unbuffer(){b(()=>{this.maxBufferSize=this.buffer.length=0})}}const S={GRANTED:"granted",NOT_GRANTED:"not-granted"};function k(e,t){const n=y();let o;return n.Zone&&"function"==typeof n.Zone.__symbol__&&(o=e[n.Zone.__symbol__(t)]),o||(o=e[t]),o}function x(e,t){return k(y(),"setTimeout")(f(e),t)}function C(e){k(y(),"clearTimeout")(e)}function _(e,t){return k(y(),"setInterval")(f(e),t)}function E(e){k(y(),"clearInterval")(e)}function T(){}const $="?";function R(e){var t,n;const o=[];let r=j(e,"stack");const s=String(e);if(r&&r.startsWith(s)&&(r=r.slice(s.length)),r&&r.split("\n").forEach(e=>{const t=function(e){const t=A.exec(e);if(!t)return;const n=t[2]&&0===t[2].indexOf("native"),o=t[2]&&0===t[2].indexOf("eval"),r=I.exec(t[2]);o&&r&&(t[2]=r[1],t[3]=r[2],t[4]=r[3]);return{args:n?[t[2]]:[],column:t[4]?+t[4]:void 0,func:t[1]||$,line:t[3]?+t[3]:void 0,url:n?void 0:t[2]}}(e)||function(e){const t=P.exec(e);if(!t)return;return{args:[],column:t[3]?+t[3]:void 0,func:$,line:t[2]?+t[2]:void 0,url:t[1]}}(e)||function(e){const t=D.exec(e);if(!t)return;return{args:[],column:t[4]?+t[4]:void 0,func:t[1]||$,line:+t[3],url:t[2]}}(e)||function(e){const t=B.exec(e);if(!t)return;const n=t[3]&&t[3].indexOf(" > eval")>-1,o=U.exec(t[3]);n&&o&&(t[3]=o[1],t[4]=o[2],t[5]=void 0);return{args:t[2]?t[2].split(","):[],column:t[5]?+t[5]:void 0,func:t[1]||$,line:t[4]?+t[4]:void 0,url:t[3]}}(e);t&&(!t.func&&t.line&&(t.func=$),o.push(t))}),o.length>0&&function(){if(void 0!==F)return F;class e extends Error{constructor(){super(),this.name="Error"}}const[t,n]=[e,Error].map(e=>new e);return F=N(Object.getPrototypeOf(t))&&n.stack!==t.stack,F}()&&e instanceof Error){const r=[];let s=e;for(;(s=Object.getPrototypeOf(s))&&N(s);){const e=(null===(t=s.constructor)||void 0===t?void 0:t.name)||$;r.push(e)}for(let e=r.length-1;e>=0&&(null===(n=o[0])||void 0===n?void 0:n.func)===r[e];e--)o.shift()}return{message:j(e,"message"),name:j(e,"name"),stack:o}}const O="((?:file|https?|blob|chrome-extension|electron|native|eval|webpack|snippet|<anonymous>|\\w+\\.|\\/).*?)",L="(?::(\\d+))",A=new RegExp(`^\\s*at (.*?) ?\\(${O}${L}?${L}?\\)?\\s*$`,"i"),I=new RegExp(`\\((\\S*)${L}${L}\\)`);const P=new RegExp(`^\\s*at ?${O}${L}?${L}??\\s*$`,"i");const D=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;const B=/^\s*(.*?)(?:\((.*?)\))?(?:(?:(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\[native).*?|[^@]*bundle|\[wasm code\])(?::(\d+))?(?::(\d+))?)|@)\s*$/i,U=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function j(e,t){if("object"!=typeof e||!e||!(t in e))return;const n=e[t];return"string"==typeof n?n:void 0}function q(e,t,n,o){if(void 0===t)return;const{name:r,message:s}=function(e){let t,n;"[object String]"==={}.toString.call(e)&&([,t,n]=M.exec(e));return{name:t,message:n}}(e);return{name:r,message:s,stack:[{url:t,column:o,line:n}]}}const M=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?([\s\S]*)$/;function N(e){return String(e.constructor).startsWith("class ")}let F;function H(e){const t=new Error(e);let n;return t.name="HandlingStack",p(()=>{const e=R(t);e.stack=e.stack.slice(2),n=z(e)}),n}function z(e){let t=G(e);return e.stack.forEach(e=>{const n="?"===e.func?"<anonymous>":e.func,o=e.args&&e.args.length>0?`(${e.args.join(", ")})`:"",r=e.line?`:${e.line}`:"",s=e.line&&e.column?`:${e.column}`:"";t+=`\n  at ${n}${o} @ ${e.url}${r}${s}`}),t}function G(e){return`${e.name||"Error"}: ${e.message}`}function W(e,t,n,{computeHandlingStack:o}={}){let r=e[t];if("function"!=typeof r){if(!(t in e)||!t.startsWith("on"))return{stop:T};r=T}let s=!1;const i=function(){if(s)return r.apply(this,arguments);const e=Array.from(arguments);let t;p(n,null,[{target:this,parameters:e,onPostCall:e=>{t=e},handlingStack:o?H("instrumented method"):void 0}]);const i=r.apply(this,e);return t&&p(t,null,[i]),i};return e[t]=i,{stop:()=>{s=!0,e[t]===i&&(e[t]=r)}}}const J=1e3,V=6e4,K=31536e6;function X(){return(new Date).getTime()}function Z(){return X()}function Y(){return performance.now()}function Q(){return{relative:Y(),timeStamp:Z()}}function ee(e,t){return t-e}function te(e,t){return e+t}function ne(e){return e-re()}let oe;function re(){return void 0===oe&&(oe=performance.timing.navigationStart),oe}const se=/[^\u0000-\u007F]/;function ie(e){return se.test(e)?void 0!==window.TextEncoder?(new TextEncoder).encode(e).length:new Blob([e]).size:e.length}function ae(e,t,n){if("object"!=typeof e||null===e)return JSON.stringify(e);const o=ce(Object.prototype),r=ce(Array.prototype),s=ce(Object.getPrototypeOf(e)),i=ce(e);try{return JSON.stringify(e,t,n)}catch(e){return"<error: unable to serialize object>"}finally{o(),r(),s(),i()}}function ce(e){const t=e,n=t.toJSON;return n?(delete t.toJSON,()=>{t.toJSON=n}):T}function ue(e,t=225280){const n=ce(Object.prototype),o=ce(Array.prototype),r=[],s=new WeakMap,i=le(e,"$",void 0,r,s),a=JSON.stringify(i);let c=a?a.length:0;if(!(c>t)){for(;r.length>0&&c<t;){const n=r.shift();let o=0;if(Array.isArray(n.source))for(let i=0;i<n.source.length;i++){const a=le(n.source[i],n.path,i,r,s);if(c+=void 0!==a?JSON.stringify(a).length:4,c+=o,o=1,c>t){fe(t,"truncated",e);break}n.target[i]=a}else for(const i in n.source)if(Object.prototype.hasOwnProperty.call(n.source,i)){const a=le(n.source[i],n.path,i,r,s);if(void 0!==a&&(c+=JSON.stringify(a).length+o+i.length+3,o=1),c>t){fe(t,"truncated",e);break}n.target[i]=a}}return n(),o(),i}fe(t,"discarded",e)}function le(e,t,n,o,r){const s=function(e){const t=e;if(t&&"function"==typeof t.toJSON)try{return t.toJSON()}catch(e){}return e}(e);if(!s||"object"!=typeof s)return function(e){if("bigint"==typeof e)return`[BigInt] ${e.toString()}`;if("function"==typeof e)return`[Function] ${e.name||"unknown"}`;if("symbol"==typeof e)return`[Symbol] ${e.description||e.toString()}`;return e}(s);const i=de(s);if("[Object]"!==i&&"[Array]"!==i&&"[Error]"!==i)return i;const a=e;if(r.has(a))return`[Reference seen at ${r.get(a)}]`;const c=void 0!==n?`${t}.${n}`:t,u=Array.isArray(s)?[]:{};return r.set(a,c),o.push({source:s,target:u,path:c}),u}function de(e){try{if(e instanceof Event)return{type:(t=e).type,isTrusted:t.isTrusted,currentTarget:t.currentTarget?de(t.currentTarget):null,target:t.target?de(t.target):null};if(e instanceof RegExp)return`[RegExp] ${e.toString()}`;const n=Object.prototype.toString.call(e).match(/\[object (.*)\]/);if(n&&n[1])return`[${n[1]}]`}catch(e){}var t;return"[Unserializable]"}function fe(e,t,n){r.warn(`The data provided has been ${t} as it is over the limit of ${e} characters:`,n)}const pe="No stack, consider using an instance of Error";function ge({stackTrace:e,originalError:t,handlingStack:n,componentStack:o,startClocks:r,nonErrorPrefix:s,useFallbackStack:i=!0,source:a,handling:c}){const u=he(t);return!e&&u&&(e=R(t)),{startClocks:r,source:a,handling:c,handlingStack:n,componentStack:o,originalError:t,type:e?e.name:void 0,message:me(e,u,s,t),stack:e?z(e):i?pe:void 0,causes:u?ve(t,a):void 0,fingerprint:ye(t),context:be(t)}}function me(e,t,n,o){return(null==e?void 0:e.message)&&(null==e?void 0:e.name)?e.message:t?"Empty message":`${n} ${ae(ue(o))}`}function ye(e){return he(e)&&"dd_fingerprint"in e?String(e.dd_fingerprint):void 0}function be(e){if(null!==e&&"object"==typeof e&&"dd_context"in e)return e.dd_context}function he(e){return e instanceof Error||"[object Error]"===Object.prototype.toString.call(e)}function ve(e,t){let n=e;const o=[];for(;he(null==n?void 0:n.cause)&&o.length<10;){const e=R(n.cause);o.push({message:n.cause.message,source:t,type:null==e?void 0:e.name,stack:e&&z(e)}),n=n.cause}return o.length?o:void 0}const we="agent",Se="console",ke="logger",xe="network",Ce="source",_e="report";function Ee(){return new h(e=>{const t=(t,n)=>{const o=ge({stackTrace:n,originalError:t,startClocks:Q(),nonErrorPrefix:"Uncaught",source:Ce,handling:"unhandled"});e.notify(o)},{stop:n}=(o=t,W(y(),"onerror",({parameters:[e,t,n,r,s]})=>{let i;he(s)||(i=q(e,t,n,r)),o(null!=s?s:e,i)}));var o;const{stop:r}=function(e){return W(y(),"onunhandledrejection",({parameters:[t]})=>{e(t.reason||"Empty reason")})}(t);return()=>{n(),r()}})}function Te(e,t){return Object.keys(e).some(n=>e[n]===t)}function $e(e){return 0===Object.keys(e).length}var Re;!function(e){e.TRACK_INTAKE_REQUESTS="track_intake_requests",e.WRITABLE_RESOURCE_GRAPHQL="writable_resource_graphql"}(Re||(Re={}));const Oe=new Set;function Le(e){Array.isArray(e)&&e.filter(e=>Te(Re,e)).forEach(e=>{Oe.add(e)})}function Ae(){return Oe}const Ie="datad0g.com",Pe="dd0g-gov.com",De="datadoghq.com",Be="pci.browser-intake-datadoghq.com",Ue=["ddsource","ddtags"];function je(e,t){const n=window.__ddBrowserSdkExtensionCallback;n&&n({type:e,payload:t})}function qe(e){return 0!==e&&100*Math.random()<=e}function Me(e){return null===e?"null":Array.isArray(e)?"array":typeof e}function Ne(e,t,n=function(){if("undefined"!=typeof WeakSet){const e=new WeakSet;return{hasAlreadyBeenSeen(t){const n=e.has(t);return n||e.add(t),n}}}const e=[];return{hasAlreadyBeenSeen(t){const n=e.indexOf(t)>=0;return n||e.push(t),n}}}()){if(void 0===t)return e;if("object"!=typeof t||null===t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const e=t.flags||[t.global?"g":"",t.ignoreCase?"i":"",t.multiline?"m":"",t.sticky?"y":"",t.unicode?"u":""].join("");return new RegExp(t.source,e)}if(n.hasAlreadyBeenSeen(t))return;if(Array.isArray(t)){const o=Array.isArray(e)?e:[];for(let e=0;e<t.length;++e)o[e]=Ne(o[e],t[e],n);return o}const o="object"===Me(e)?e:{};for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(o[e]=Ne(o[e],t[e],n));return o}function Fe(e){return Ne(void 0,e)}function He(...e){let t;for(const n of e)null!=n&&(t=Ne(t,n));return t}function ze(){var e;const t=window.navigator;return{status:t.onLine?"connected":"not_connected",interfaces:t.connection&&t.connection.type?[t.connection.type]:void 0,effective_type:null===(e=t.connection)||void 0===e?void 0:e.effectiveType}}function Ge(e,t){const n=e.indexOf(t);n>=0&&e.splice(n,1)}function We(){const e=[];return{add:t=>{e.push(t)>500&&e.splice(0,1)},remove:t=>{Ge(e,t)},drain:t=>{e.forEach(e=>e(t)),e.length=0}}}function Je(){const e=y().DatadogEventBridge;if(e)return{getCapabilities(){var t;return JSON.parse((null===(t=e.getCapabilities)||void 0===t?void 0:t.call(e))||"[]")},getPrivacyLevel(){var t;return null===(t=e.getPrivacyLevel)||void 0===t?void 0:t.call(e)},getAllowedWebViewHosts(){return JSON.parse(e.getAllowedWebViewHosts())},send(t,n,o){const r=o?{id:o}:void 0;e.send(JSON.stringify({eventType:t,event:n,view:r}))}}}function Ve(e){var t;void 0===e&&(e=null===(t=y().location)||void 0===t?void 0:t.hostname);const n=Je();return!!n&&n.getAllowedWebViewHosts().some(t=>e===t||e.endsWith(`.${t}`))}function Ke(e){return Object.values(e)}function Xe(e,t,n,o,r){return Ze(e,t,[n],o,r)}function Ze(e,t,n,o,{once:r,capture:s,passive:i}={}){const a=f(t=>{(t.isTrusted||t.__ddIsTrusted||e.allowUntrustedEvents)&&(r&&d(),o(t))}),c=i?{capture:s,passive:i}:s,u=window.EventTarget&&t instanceof EventTarget?window.EventTarget.prototype:t,l=k(u,"addEventListener");function d(){const e=k(u,"removeEventListener");n.forEach(n=>e.call(t,n,a,c))}return n.forEach(e=>l.call(t,e,a,c)),{stop:d}}const Ye={HIDDEN:"visibility_hidden",UNLOADING:"before_unload",PAGEHIDE:"page_hide",FROZEN:"page_frozen"};function Qe({encoder:e,request:t,flushController:n,messageBytesLimit:o}){let s={};const c=n.flushObservable.subscribe(n=>function(n){const o=Ke(s).join("\n");s={};const r=(a=n.reason,Ke(Ye).includes(a)),i=r?t.sendOnExit:t.send;var a;if(r&&e.isAsync){const t=e.finishSync();t.outputBytesCount&&i(et(t));const n=[t.pendingData,o].filter(Boolean).join("\n");n&&i({data:n,bytesCount:ie(n)})}else o&&e.write(e.isEmpty?o:`\n${o}`),e.finish(e=>{i(et(e))})}(n));function u(t,c){const u=ae(t),l=e.estimateEncodedBytesCount(u);l>=o?r.warn(`Discarded a message whose size was bigger than the maximum allowed size ${o}KB. ${a} ${i}/#technical-limitations`):(function(e){return void 0!==e&&void 0!==s[e]}(c)&&function(t){const o=s[t];delete s[t];const r=e.estimateEncodedBytesCount(o);n.notifyAfterRemoveMessage(r)}(c),function(t,o,r){n.notifyBeforeAddMessage(o),void 0!==r?(s[r]=t,n.notifyAfterAddMessage()):e.write(e.isEmpty?t:`\n${t}`,e=>{n.notifyAfterAddMessage(e-o)})}(u,l,c))}return{flushController:n,add:u,upsert:u,stop:c.unsubscribe}}function et(e){let t;return t="string"==typeof e.output?e.output:new Blob([e.output],{type:"text/plain"}),{data:t,bytesCount:e.outputBytesCount,encoding:e.encoding}}function tt(e){return e>=500}const nt=3145728,ot=J;function rt(e,t,n,o,r){0===t.transportStatus&&0===t.queuedPayloads.size()&&t.bandwidthMonitor.canHandle(e)?it(e,t,n,{onSuccess:()=>at(0,t,n,o,r),onFailure:()=>{t.queuedPayloads.enqueue(e),st(t,n,o,r)}}):t.queuedPayloads.enqueue(e)}function st(e,t,n,o){2===e.transportStatus&&x(()=>{it(e.queuedPayloads.first(),e,t,{onSuccess:()=>{e.queuedPayloads.dequeue(),e.currentBackoffTime=ot,at(1,e,t,n,o)},onFailure:()=>{e.currentBackoffTime=Math.min(6e4,2*e.currentBackoffTime),st(e,t,n,o)}})},e.currentBackoffTime)}function it(e,t,n,{onSuccess:o,onFailure:r}){t.bandwidthMonitor.add(e),n(e,n=>{t.bandwidthMonitor.remove(e),!function(e){return"opaque"!==e.type&&(0===e.status&&!navigator.onLine||408===e.status||429===e.status||tt(e.status))}(n)?(t.transportStatus=0,o()):(t.transportStatus=t.bandwidthMonitor.ongoingRequestCount>0?1:2,e.retry={count:e.retry?e.retry.count+1:1,lastFailureStatus:n.status},r())})}function at(e,t,n,o,r){0===e&&t.queuedPayloads.isFull()&&!t.queueFullReported&&(r({message:`Reached max ${o} events size queued for upload: 3MiB`,source:we,startClocks:Q()}),t.queueFullReported=!0);const s=t.queuedPayloads;for(t.queuedPayloads=ct();s.size()>0;)rt(s.dequeue(),t,n,o,r)}function ct(){const e=[];return{bytesCount:0,enqueue(t){this.isFull()||(e.push(t),this.bytesCount+=t.bytesCount)},first(){return e[0]},dequeue(){const t=e.shift();return t&&(this.bytesCount-=t.bytesCount),t},size(){return e.length},isFull(){return this.bytesCount>=nt}}}function ut(e,t,n){const o={transportStatus:0,currentBackoffTime:ot,bandwidthMonitor:{ongoingRequestCount:0,ongoingByteCount:0,canHandle(e){return 0===this.ongoingRequestCount||this.ongoingByteCount+e.bytesCount<=81920&&this.ongoingRequestCount<32},add(e){this.ongoingRequestCount+=1,this.ongoingByteCount+=e.bytesCount},remove(e){this.ongoingRequestCount-=1,this.ongoingByteCount-=e.bytesCount}},queuedPayloads:ct(),queueFullReported:!1},r=(n,o)=>function(e,t,n,o){const r=function(){try{return window.Request&&"keepalive"in new Request("http://a")}catch(e){return!1}}()&&n.bytesCount<t;if(r){const t=e.build("fetch-keepalive",n);fetch(t,{method:"POST",body:n.data,keepalive:!0,mode:"cors"}).then(f(e=>null==o?void 0:o({status:e.status,type:e.type}))).catch(f(()=>dt(e,n,o)))}else dt(e,n,o)}(e,t,n,o);return{send:t=>{rt(t,o,r,e.trackType,n)},sendOnExit:n=>{!function(e,t,n){const o=!!navigator.sendBeacon&&n.bytesCount<t;if(o)try{const t=e.build("beacon",n);if(navigator.sendBeacon(t,n.data))return}catch(e){!function(e){lt||(lt=!0,g(e))}(e)}dt(e,n)}(e,t,n)}}}let lt=!1;function dt(e,t,n){const o=e.build("fetch",t);fetch(o,{method:"POST",body:t.data,mode:"cors"}).then(f(e=>null==n?void 0:n({status:e.status,type:e.type}))).catch(f(()=>null==n?void 0:n({status:0})))}function ft({messagesLimit:e,bytesLimit:t,durationLimit:n,pageMayExitObservable:o,sessionExpireObservable:r}){const s=o.subscribe(e=>d(e.reason)),i=r.subscribe(()=>d("session_expire")),a=new h(()=>()=>{s.unsubscribe(),i.unsubscribe()});let c,u=0,l=0;function d(e){if(0===l)return;const t=l,n=u;l=0,u=0,f(),a.notify({reason:e,messagesCount:t,bytesCount:n})}function f(){C(c),c=void 0}return{flushObservable:a,get messagesCount(){return l},notifyBeforeAddMessage(e){u+e>=t&&d("bytes_limit"),l+=1,u+=e,void 0===c&&(c=x(()=>{d("duration_limit")},n))},notifyAfterAddMessage(n=0){u+=n,l>=e?d("messages_limit"):u>=t&&d("bytes_limit")},notifyAfterRemoveMessage(e){u-=e,l-=1,0===l&&f()}}}function pt(e,t,n,o,r,s,i=Qe){const a=u(e,t),c=n&&u(e,n);function u(e,{endpoint:t,encoder:n}){return i({encoder:n,request:ut(t,e.batchBytesLimit,o),flushController:ft({messagesLimit:e.batchMessagesLimit,bytesLimit:e.batchBytesLimit,durationLimit:e.flushTimeout,pageMayExitObservable:r,sessionExpireObservable:s}),messageBytesLimit:e.messageBytesLimit})}return{flushObservable:a.flushController.flushObservable,add(e,t=!0){a.add(e),c&&t&&c.add(n.transformMessage?n.transformMessage(e):e)},upsert:(e,t)=>{a.upsert(e,t),c&&c.upsert(n.transformMessage?n.transformMessage(e):e,t)},stop:()=>{a.stop(),c&&c.stop()}}}const gt="log",mt="configuration",yt="usage",bt=["https://www.datadoghq-browser-agent.com","https://www.datad0g-browser-agent.com","https://d3uc069fcn7uxw.cloudfront.net","https://d20xtzwzcl0ceb.cloudfront.net","http://localhost","<anonymous>"],ht=["ddog-gov.com"];let vt=We(),wt=e=>{vt.add(()=>wt(e))};function St(e,t,n,o,r,s){const i=new h,{stop:a}=function(e,t,n,o,r){const s=[];if(Ve()){const e=Je(),t=r.subscribe(t=>e.send("internal_telemetry",t));s.push(()=>t.unsubscribe())}else{const i=pt(e,{endpoint:e.rumEndpointBuilder,encoder:o(4)},e.replica&&{endpoint:e.replica.rumEndpointBuilder,encoder:o(5)},t,n,new h);s.push(()=>i.stop());const a=r.subscribe(t=>i.add(t,function(e){return e.site===Ie}(e)));s.push(()=>a.unsubscribe())}return{stop:()=>s.forEach(e=>e())}}(t,o,r,s,i),{enabled:c}=function(e,t,n,o){const r=new Set,s=!ht.includes(t.site)&&qe(t.telemetrySampleRate),i={[gt]:s,[mt]:s&&qe(t.telemetryConfigurationSampleRate),[yt]:s&&qe(t.telemetryUsageSampleRate)},a={is_local_file:"file:"===window.location.protocol,is_worker:"WorkerGlobalScope"in self};return wt=s=>{const u=ae(s);if(i[s.type]&&r.size<t.maxTelemetryEventsPerPage&&!r.has(u)){const t=c(n,e,s,a);o.notify(t),je("telemetry",t),r.add(u)}},vt.drain(),function(e){u=e}(xt),{enabled:s};function c(e,t,n,o){const r=Q(),s=e.triggerHook(1,{startTime:r.relative}),i={type:"telemetry",date:r.timeStamp,service:t,version:"6.14.0",source:"browser",_dd:{format_version:2},telemetry:He(n,{runtime_env:o,connectivity:ze(),sdk_setup:"npm"}),experimental_features:Array.from(Ae())};return He(i,s)}}(e,t,n,i);return{stop:a,enabled:c}}function kt(t,n){m(e.debug,t,n),wt({type:gt,message:t,status:"debug",...n})}function xt(e,t){wt({type:gt,status:"error",..._t(e),...t})}function Ct(e){wt({type:yt,usage:e})}function _t(e){if(he(e)){const t=R(e);return{error:{kind:t.name,stack:z(Et(t))},message:t.message}}return{error:{stack:pe},message:`Uncaught ${ae(e)}`}}function Et(e){return e.stack=e.stack.filter(e=>!e.url||bt.some(t=>e.url.startsWith(t))),e}function Tt(e,t,n,o){return f((...r)=>(o&&Ct({feature:o}),e()[t][n](...r)))}function $t(e,t,n){e.changeObservable.subscribe(()=>{const o=e.getContext();n.add(e=>e[t].setContext(o))})}const Rt="userContext",Ot="globalContext",Lt="accountContext",At="getContext",It="setContext",Pt="setContextProperty",Dt="removeContextProperty",Bt="clearContext";function Ut(e,t){t.silentMultipleInit||r.error(`${e} is already initialized.`)}function jt(e,t,n){const o={...e};for(const[e,{required:s,type:i}]of Object.entries(t))"string"!==i||qt(o[e])||(o[e]=String(o[e])),s&&qt(o[e])&&r.warn(`The property ${e} of ${n} is required; context will not be sent to the intake.`);return o}function qt(e){return null==e||""===e}function Mt(e="",{propertiesConfig:t={}}={}){let n={};const o=new h,s={getContext:()=>Fe(n),setContext:i=>{!function(e){const t="object"===Me(e);return t||r.error("Unsupported context:",e),t}(i)?s.clearContext():n=ue(jt(i,t,e)),o.notify()},setContextProperty:(r,s)=>{n=ue(jt({...n,[r]:s},t,e)),o.notify()},removeContextProperty:r=>{delete n[r],jt(n,t,e),o.notify()},clearContext:()=>{n={},o.notify()},changeObservable:o};return s}function Nt(e,t,n){const o=n.getHandler(),r=Array.isArray(o)?o:[o];return Ht[e]>=Ht[n.getLevel()]&&r.includes(t)}const Ft={ok:"ok",debug:"debug",info:"info",notice:"notice",warn:"warn",error:"error",critical:"critical",alert:"alert",emerg:"emerg"},Ht={[Ft.ok]:0,[Ft.debug]:1,[Ft.info]:2,[Ft.notice]:4,[Ft.warn]:5,[Ft.error]:6,[Ft.critical]:7,[Ft.alert]:8,[Ft.emerg]:9};function zt(e,{includeMessage:t=!1}={}){return{stack:e.stack,kind:e.type,message:t?e.message:void 0,causes:e.causes,fingerprint:e.fingerprint,handling:e.handling}}var Gt=function(e,t,n,o){var r,s=arguments.length,i=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(i=(s<3?r(i):s>3?r(t,n,i):r(t,n))||i);return s>3&&i&&Object.defineProperty(t,n,i),i};const Wt="console",Jt="http",Vt=Object.keys(Ft);class Kt{constructor(e,t,n=Jt,o=Ft.debug,r={}){this.handleLogStrategy=e,this.handlerType=n,this.level=o,this.contextManager=Mt("logger"),this.contextManager.setContext(r),t&&this.contextManager.setContextProperty("logger",{name:t})}logImplementation(e,t,n=Ft.info,o,r){const s=ue(t);let i;if(null!=o){const e=ge({originalError:o,nonErrorPrefix:"Provided",source:ke,handling:"handled",startClocks:Q()});i=He({error:zt(e,{includeMessage:!0})},e.context,s)}else i=s;this.handleLogStrategy({message:ue(e),context:i,status:n},this,r)}log(e,t,n=Ft.info,o){let r;Nt(n,Jt,this)&&(r=H("log")),this.logImplementation(e,t,n,o,r)}setContext(e){this.contextManager.setContext(e)}getContext(){return this.contextManager.getContext()}setContextProperty(e,t){this.contextManager.setContextProperty(e,t)}removeContextProperty(e){this.contextManager.removeContextProperty(e)}clearContext(){this.contextManager.clearContext()}setHandler(e){this.handlerType=e}getHandler(){return this.handlerType}setLevel(e){this.level=e}getLevel(){return this.level}}function Xt(e){return function(t,n,o){let r;Nt(e,Jt,this)&&(r=H("log")),this.logImplementation(t,n,e,o,r)}}function Zt(){return{view:{referrer:document.referrer,url:window.location.href}}}Gt([function(e,t,n){const o=n.value;n.value=function(...e){return(u?f(o):o).apply(this,e)}}],Kt.prototype,"logImplementation",null),Kt.prototype.ok=Xt(Ft.ok),Kt.prototype.debug=Xt(Ft.debug),Kt.prototype.info=Xt(Ft.info),Kt.prototype.notice=Xt(Ft.notice),Kt.prototype.warn=Xt(Ft.warn),Kt.prototype.error=Xt(Ft.error),Kt.prototype.critical=Xt(Ft.critical),Kt.prototype.alert=Xt(Ft.alert),Kt.prototype.emerg=Xt(Ft.emerg);const Yt="_dd_c",Qt=[];function en(e,t,n,o){const r=function(e,t){return`${Yt}_${e}_${t}`}(n,o);Qt.push(Xe(e,window,"storage",({key:e})=>{r===e&&t.setContext(i())})),t.changeObservable.subscribe(function(){localStorage.setItem(r,JSON.stringify(t.getContext()))});const s=He(i(),t.getContext());function i(){const e=localStorage.getItem(r);return e?JSON.parse(e):{}}$e(s)||t.setContext(s)}function tn(){return Mt("global context")}const nn="DISCARDED",on="SKIPPED";function rn(){return Mt("account",{propertiesConfig:{id:{type:"string",required:!0},name:{type:"string"}}})}function sn(){return Mt("user",{propertiesConfig:{id:{type:"string"},name:{type:"string"},email:{type:"string"}}})}function an(e){return cn(e,location.href).href}function cn(e,t){const n=function(){if(void 0===ln)try{const e=new un("http://test/path");ln="http://test/path"===e.href}catch(e){ln=!1}return ln?un:void 0}();if(n)try{return void 0!==t?new n(e,t):new n(e)}catch(n){throw new Error(`Failed to construct URL: ${String(n)} ${ae({url:e,base:t})}`)}if(void 0===t&&!/:/.test(e))throw new Error(`Invalid URL: '${e}'`);let o=document;const r=o.createElement("a");if(void 0!==t){o=document.implementation.createHTMLDocument("");const e=o.createElement("base");e.href=t,o.head.appendChild(e),o.body.appendChild(r)}return r.href=e,r}const un=URL;let ln,dn;function fn(){return dn||(dn=new h(e=>{if(!window.fetch)return;const{stop:t}=W(window,"fetch",t=>function({parameters:e,onPostCall:t,handlingStack:n},o){const[r,s]=e;let i=s&&s.method;void 0===i&&r instanceof Request&&(i=r.method);const a=void 0!==i?String(i).toUpperCase():"GET",c=r instanceof Request?r.url:an(String(r)),u=Q(),l={state:"start",init:s,input:r,method:a,startClocks:u,url:c,handlingStack:n};o.notify(l),e[0]=l.input,e[1]=l.init,t(e=>function(e,t,n){const o=n;function r(t){o.state="resolve",Object.assign(o,t),e.notify(o)}t.then(f(e=>{r({response:e,responseType:e.type,status:e.status,isAborted:!1})}),f(e=>{var t,n;r({status:0,isAborted:(null===(n=null===(t=o.init)||void 0===t?void 0:t.signal)||void 0===n?void 0:n.aborted)||e instanceof DOMException&&e.code===DOMException.ABORT_ERR,error:e})}))}(o,e,l))}(t,e),{computeHandlingStack:!0});return t})),dn}function pn(e){return e?(parseInt(e,10)^16*Math.random()>>parseInt(e,10)/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,pn)}const gn=/([\w-]+)\s*=\s*([^;]+)/g;function mn(e,t,n=""){const o=e.charCodeAt(t-1),r=o>=55296&&o<=56319?t+1:t;return e.length<=r?e:`${e.slice(0,r)}${n}`}let yn,bn,hn;function vn(){return null!=yn?yn:yn=function(e=window){var t;const n=e.navigator.userAgent;if(e.chrome||/HeadlessChrome/.test(n))return 0;if(0===(null===(t=e.navigator.vendor)||void 0===t?void 0:t.indexOf("Apple"))||/safari/i.test(n)&&!/chrome|android/i.test(n))return 1;return 2}()}function wn(e,t,n=0,o){const r=new Date;r.setTime(r.getTime()+n);const s=`expires=${r.toUTCString()}`,i=o&&o.crossSite?"none":"strict",a=o&&o.domain?`;domain=${o.domain}`:"",c=o&&o.secure?";secure":"",u=o&&o.partitioned?";partitioned":"";document.cookie=`${e}=${t};${s};path=/;samesite=${i}${a}${c}${u}`}function Sn(e){return function(e,t){for(gn.lastIndex=0;;){const n=gn.exec(e);if(!n)break;if(n[1]===t)return n[2]}}(document.cookie,e)}function kn(e){return bn||(bn=function(e){const t=new Map;for(gn.lastIndex=0;;){const n=gn.exec(e);if(!n)break;t.set(n[1],n[2])}return t}(document.cookie)),bn.get(e)}function xn(e,t){wn(e,"",0,t)}const Cn="_dd_s",_n=144e5,En=9e5,Tn=K,$n="cookie",Rn="local-storage",On=/^([a-zA-Z]+)=([a-z0-9-]+)$/;function Ln(e,t){const n={isExpired:"1"};return t.trackAnonymousUser&&((null==e?void 0:e.anonymousId)?n.anonymousId=null==e?void 0:e.anonymousId:n.anonymousId=pn()),n}function An(e){return $e(e)}function In(e){return!An(e)}function Pn(e){return void 0!==e.isExpired||!((void 0===(t=e).created||X()-Number(t.created)<_n)&&(void 0===t.expire||X()<Number(t.expire)));var t}function Dn(e){e.expire=String(X()+En)}function Bn(e){return(t=e,Object.entries(t)).map(([e,t])=>"anonymousId"===e?`aid=${t}`:`${e}=${t}`).join("&");var t}function Un(e){const t={};return function(e){return!!e&&(-1!==e.indexOf("&")||On.test(e))}(e)&&e.split("&").forEach(e=>{const n=On.exec(e);if(null!==n){const[,e,o]=n;"aid"===e?t.anonymousId=o:t[e]=o}}),t}function jn(e){const t=function(e){const t={};t.secure=!!e.useSecureSessionCookie||!!e.usePartitionedCrossSiteSessionCookie,t.crossSite=!!e.usePartitionedCrossSiteSessionCookie,t.partitioned=!!e.usePartitionedCrossSiteSessionCookie,e.trackSessionAcrossSubdomains&&(t.domain=function(){if(void 0===hn){const e=`dd_site_test_${pn()}`,t="test",n=window.location.hostname.split(".");let o=n.pop();for(;n.length&&!Sn(e);)o=`${n.pop()}.${o}`,wn(e,t,J,{domain:o});xn(e,{domain:o}),hn=o}return hn}());return t}(e);return function(e){if(void 0===document.cookie||null===document.cookie)return!1;try{const t=`dd_cookie_test_${pn()}`,n="test";wn(t,n,V,e);const o=Sn(t)===n;return xn(t,e),o}catch(e){return r.error(e),!1}}(t)?{type:$n,cookieOptions:t}:void 0}function qn(e,t){const n={isLockEnabled:0===vn(),persistSession:n=>Mn(t,e,n,En),retrieveSession:Nn,expireSession:n=>Mn(t,e,Ln(n,e),_n)};return function(e){if(!kn(Cn)){const t=kn("_dd"),n=kn("_dd_r"),o=kn("_dd_l"),r={};t&&(r.id=t),o&&/^[01]$/.test(o)&&(r.logs=o),n&&/^[012]$/.test(n)&&(r.rum=n),In(r)&&(Dn(r),e.persistSession(r))}}(n),n}function Mn(e,t,n,o){wn(Cn,Bn(n),t.trackAnonymousUser?Tn:o,e)}function Nn(){return Un(Sn(Cn))}function Fn(){try{const e=pn(),t=`_dd_test_${e}`;localStorage.setItem(t,e);const n=localStorage.getItem(t);return localStorage.removeItem(t),e===n?{type:Rn}:void 0}catch(e){return}}function Hn(e){return{isLockEnabled:!1,persistSession:zn,retrieveSession:Gn,expireSession:t=>function(e,t){zn(Ln(e,t))}(t,e)}}function zn(e){localStorage.setItem(Cn,Bn(e))}function Gn(){return Un(localStorage.getItem(Cn))}const Wn="--",Jn=[];let Vn;function Kn(e,t,n=0){var o;const{isLockEnabled:r,persistSession:s,expireSession:i}=t,a=e=>s({...e,lock:u}),c=()=>{const{lock:e,...n}=t.retrieveSession();return{session:n,lock:e&&!Yn(e)?e:void 0}};if(Vn||(Vn=e),e!==Vn)return void Jn.push(e);if(r&&n>=100)return kt("Aborted session operation after max lock retries",{currentStore:c()}),void Zn(t);let u,l=c();if(r){if(l.lock)return void Xn(e,t,n);if(u=pn()+Wn+Z(),a(l.session),l=c(),l.lock!==u)return void Xn(e,t,n)}let d=e.process(l.session);if(r&&(l=c(),l.lock!==u))Xn(e,t,n);else{if(d&&(Pn(d)?i(d):(Dn(d),r?a(d):s(d))),r&&(!d||!Pn(d))){if(l=c(),l.lock!==u)return void Xn(e,t,n);s(l.session),d=l.session}null===(o=e.after)||void 0===o||o.call(e,d||l.session),Zn(t)}}function Xn(e,t,n){x(()=>{Kn(e,t,n+1)},10)}function Zn(e){Vn=void 0;const t=Jn.shift();t&&Kn(t,e)}function Yn(e){const[,t]=e.split(Wn);return!t||ee(Number(t),Z())>1e3}const Qn=J;function eo(e){switch(e.sessionPersistence){case $n:return jn(e);case Rn:return Fn();case void 0:{let t=jn(e);return!t&&e.allowFallbackToLocalStorage&&(t=Fn()),t}default:r.error(`Invalid session persistence '${String(e.sessionPersistence)}'`)}}function to(e,t,n,o,r=function(e,t){return e.type===$n?qn(t,e.cookieOptions):Hn(t)}(e,t)){const s=new h,i=new h,a=new h,c=_(function(){const e=r.retrieveSession();Pn(e)?Kn({process:e=>Ln(e,t),after:f},r):f(e)},Qn);let u;p();const{throttled:l,cancel:d}=function(e,t,n){const o=!n||void 0===n.leading||n.leading,r=!n||void 0===n.trailing||n.trailing;let s,i,a=!1;return{throttled:(...n)=>{a?s=n:(o?e(...n):s=n,a=!0,i=x(()=>{r&&s&&e(...s),a=!1,s=void 0},t))},cancel:()=>{C(i),a=!1,s=void 0}}}(()=>{Kn({process:e=>{if(An(e))return;const t=f(e);return function(e){if(An(e))return!1;const t=o(e[n]);e[n]=t,delete e.isExpired,"0"===t||e.id||(e.id=pn(),e.created=String(X()))}(t),t},after:e=>{In(e)&&!g()&&function(e){u=e,s.notify()}(e),u=e}},r)},Qn);function f(e){return Pn(e)&&(e=Ln(e,t)),g()&&(!function(e){return u.id!==e.id||u[n]!==e[n]}(e)?(a.notify({previousState:u,newState:e}),u=e):(u=Ln(u,t),i.notify())),e}function p(){Kn({process:e=>{if(An(e))return Ln(e,t)},after:e=>{u=e}},r)}function g(){return void 0!==(null==u?void 0:u[n])}return{expandOrRenewSession:l,expandSession:function(){Kn({process:e=>g()?f(e):void 0},r)},getSession:()=>u,renewObservable:s,expireObservable:i,sessionStateUpdateObservable:a,restartSession:p,expire:()=>{d(),r.expireSession(u),f(Ln(u,t))},stop:()=>{E(c)},updateSessionState:function(e){Kn({process:t=>({...t,...e}),after:f},r)}}}const no=["chrome-extension://","moz-extension://"];function oo(e){return no.some(t=>e.includes(t))}function ro(e,t=("undefined"!=typeof location?location.origin:""),n){const o=e.allowedTrackingOrigins;if(!o)return function(e,t=(new Error).stack){return!oo(e)&&oo(t||"")}(t,n)&&r.warn("Running the Browser SDK in a Web extension content script is discouraged and will be forbidden in a future major release unless the `allowedTrackingOrigins` option is provided."),!0;const s=function(e,t,n=!1){return e.some(e=>{try{if("function"==typeof e)return e(t);if(e instanceof RegExp)return e.test(t);if("string"==typeof e)return n?t.startsWith(e):e===t}catch(e){r.error(e)}return!1})}(o,t);return s||r.error("SDK initialized on a non-allowed domain."),s}function so(e,t,n){const o=function(e,t){const n=`/api/v2/${t}`,o=e.proxy;if("string"==typeof o){const e=an(o);return t=>`${e}?ddforward=${encodeURIComponent(`${n}?${t}`)}`}if("function"==typeof o)return e=>o({path:n,parameters:e});const r=function(e,t){const{site:n=De,internalAnalyticsSubdomain:o}=t;if("logs"===e&&t.usePciIntake&&n===De)return Be;if(o&&n===De)return`${o}.${De}`;if(n===Pe)return`http-intake.logs.${n}`;const r=n.split("."),s=r.pop();return`browser-intake-${r.join("-")}.${s}`}(t,e);return e=>`https://${r}${n}?${e}`}(e,t);return{build(r,s){const i=function({clientToken:e,internalAnalyticsSubdomain:t},n,o,r,{retry:s,encoding:i}){const a=["sdk_version:6.14.0",`api:${r}`].concat(o);s&&a.push(`retry_count:${s.count}`,`retry_after:${s.lastFailureStatus}`);const c=["ddsource=browser",`ddtags=${encodeURIComponent(a.join(","))}`,`dd-api-key=${e}`,`dd-evp-origin-version=${encodeURIComponent("6.14.0")}`,"dd-evp-origin=browser",`dd-request-id=${pn()}`];i&&c.push(`dd-evp-encoding=${i}`);"rum"===n&&c.push(`batch_time=${Z()}`);t&&c.reverse();return c.join("&")}(e,t,n,r,s);return o(i)},tags:n,urlPrefix:o(""),trackType:t}}function io(e,t){const n=200-e.length-1;(t.length>n||function(e){if(!function(){try{return new RegExp("[\\p{Ll}]","u"),!0}catch(e){return!1}}())return!1;return new RegExp("[^\\p{Ll}\\p{Lo}0-9_:./-]","u").test(e)}(t))&&r.warn(`${e} value doesn't meet tag requirements and will be sanitized. ${a} ${s}/getting_started/tagging/#defining-tags`);return`${e}:${t.replace(/,/g,"_")}`}function ao(e){const t=e.site||De,n=function(e){const{env:t,service:n,version:o,datacenter:r}=e,s=[];return t&&s.push(io("env",t)),n&&s.push(io("service",n)),o&&s.push(io("version",o)),r&&s.push(io("datacenter",r)),s}(e),o=function(e,t){return{logsEndpointBuilder:so(e,"logs",t),rumEndpointBuilder:so(e,"rum",t),profilingEndpointBuilder:so(e,"profile",t),sessionReplayEndpointBuilder:so(e,"replay",t)}}(e,n),r=function(e,t){if(!e.replica)return;const n={...e,site:De,clientToken:e.replica.clientToken},o={logsEndpointBuilder:so(n,"logs",t),rumEndpointBuilder:so(n,"rum",t)};return{applicationId:e.replica.applicationId,...o}}(e,n);return{replica:r,site:t,...o}}function co(e,t){return null==e||"string"==typeof e||(r.error(`${t} must be defined as a string`),!1)}function uo(e,t){return!!(void 0===e||(n=e,function(e){return"number"==typeof e}(n)&&n>=0&&n<=100))||(r.error(`${t} Sample Rate should be a number between 0 and 100`),!1);var n}function lo(e){var t,n,o,i,u,l;if(e&&e.clientToken)if(void 0===e.allowedTrackingOrigins||Array.isArray(e.allowedTrackingOrigins)){if((!(d=e.site)||"string"!=typeof d||/(datadog|ddog|datad0g|dd0g)/.test(d)||(r.error(`Site should be a valid Datadog site. ${a} ${s}/getting_started/site/.`),0))&&uo(e.sessionSampleRate,"Session")&&uo(e.telemetrySampleRate,"Telemetry")&&uo(e.telemetryConfigurationSampleRate,"Telemetry Configuration")&&uo(e.telemetryUsageSampleRate,"Telemetry Usage")&&co(e.version,"Version")&&co(e.env,"Env")&&co(e.service,"Service")&&ro(e)){var d;if(void 0===e.trackingConsent||Te(S,e.trackingConsent))return{beforeSend:e.beforeSend&&c(e.beforeSend,"beforeSend threw an error:"),sessionStoreStrategyType:eo(e),sessionSampleRate:null!==(t=e.sessionSampleRate)&&void 0!==t?t:100,telemetrySampleRate:null!==(n=e.telemetrySampleRate)&&void 0!==n?n:20,telemetryConfigurationSampleRate:null!==(o=e.telemetryConfigurationSampleRate)&&void 0!==o?o:5,telemetryUsageSampleRate:null!==(i=e.telemetryUsageSampleRate)&&void 0!==i?i:5,service:e.service||void 0,silentMultipleInit:!!e.silentMultipleInit,allowUntrustedEvents:!!e.allowUntrustedEvents,trackingConsent:null!==(u=e.trackingConsent)&&void 0!==u?u:S.GRANTED,trackAnonymousUser:null===(l=e.trackAnonymousUser)||void 0===l||l,storeContextsAcrossPages:!!e.storeContextsAcrossPages,batchBytesLimit:16384,eventRateLimiterThreshold:3e3,maxTelemetryEventsPerPage:15,flushTimeout:3e4,batchMessagesLimit:50,messageBytesLimit:262144,...ao(e)};r.error('Tracking Consent should be either "granted" or "not-granted"')}}else r.error("Allowed Tracking Origins must be an array");else r.error("Client Token is not configured, we will not send any data.")}const fo={intervention:"intervention",deprecation:"deprecation",cspViolation:"csp_violation"};function po(e,t){const n=[];t.includes(fo.cspViolation)&&n.push(function(e){return new h(t=>{const{stop:n}=Xe(e,document,"securitypolicyviolation",e=>{t.notify(function(e){const t=`'${e.blockedURI}' blocked by '${e.effectiveDirective}' directive`;return go({type:e.effectiveDirective,message:`${fo.cspViolation}: ${t}`,originalError:e,csp:{disposition:e.disposition},stack:mo(e.effectiveDirective,e.originalPolicy?`${t} of the policy "${mn(e.originalPolicy,100,"...")}"`:"no policy",e.sourceFile,e.lineNumber,e.columnNumber)})}(e))});return n})}(e));const o=t.filter(e=>e!==fo.cspViolation);return o.length&&n.push(function(e){return new h(t=>{if(!window.ReportingObserver)return;const n=f((e,n)=>e.forEach(e=>t.notify(function(e){const{type:t,body:n}=e;return go({type:n.id,message:`${t}: ${n.message}`,originalError:e,stack:mo(n.id,n.message,n.sourceFile,n.lineNumber,n.columnNumber)})}(e)))),o=new window.ReportingObserver(n,{types:e,buffered:!0});return o.observe(),()=>{o.disconnect()}})}(o)),v(...n)}function go(e){return{startClocks:Q(),source:_e,handling:"unhandled",...e}}function mo(e,t,n,o,r){return n?z({name:e,message:t,stack:[{func:"?",url:n,line:null!=o?o:void 0,column:null!=r?r:void 0}]}):void 0}function yo(e,t,n){return void 0===e?[]:"all"===e||Array.isArray(e)&&e.every(e=>t.includes(e))?"all"===e?t:function(e){const t=new Set;return e.forEach(e=>t.add(e)),Array.from(t)}(e):void r.error(`${n} should be "all" or an array with allowed values "${t.join('", "')}"`)}function bo(e){const t={session_sample_rate:(n=e).sessionSampleRate,telemetry_sample_rate:n.telemetrySampleRate,telemetry_configuration_sample_rate:n.telemetryConfigurationSampleRate,telemetry_usage_sample_rate:n.telemetryUsageSampleRate,use_before_send:!!n.beforeSend,use_partitioned_cross_site_session_cookie:n.usePartitionedCrossSiteSessionCookie,use_secure_session_cookie:n.useSecureSessionCookie,use_proxy:!!n.proxy,silent_multiple_init:n.silentMultipleInit,track_session_across_subdomains:n.trackSessionAcrossSubdomains,track_anonymous_user:n.trackAnonymousUser,session_persistence:n.sessionPersistence,allow_fallback_to_local_storage:!!n.allowFallbackToLocalStorage,store_contexts_across_pages:!!n.storeContextsAcrossPages,allow_untrusted_events:!!n.allowUntrustedEvents,tracking_consent:n.trackingConsent,use_allowed_tracking_origins:Array.isArray(n.allowedTrackingOrigins)};var n;return{forward_errors_to_logs:e.forwardErrorsToLogs,forward_console_logs:e.forwardConsoleLogs,forward_reports:e.forwardReports,use_pci_intake:e.usePciIntake,...t}}function ho(t,n,o){const s=We(),i=tn();$t(i,Ot,s);const a=rn();$t(a,Lt,s);const c=sn();let u,l;$t(c,Rt,s);const d=n.observable.subscribe(f);function f(){if(!l||!u||!n.isGranted())return;d.unsubscribe();const e=o(u,l);s.drain(e)}return{init(t){if(!t)return void r.error("Missing configuration");if(Le(t.enableExperimentalFeatures),Ve()&&(t=function(e){return{...e,clientToken:"empty"}}(t)),u=t,x(()=>{!function(e){wt({type:mt,configuration:e})}(bo(t))}),l)return void Ut("DD_LOGS",t);const o=function(t){!0===t.usePciIntake&&t.site&&"datadoghq.com"!==t.site&&r.warn("PCI compliance for Logs is only available for Datadog organizations in the US1 site. Default intake will be used.");const n=lo(t),o=yo(t.forwardConsoleLogs,Ke(e),"Forward Console Logs"),s=yo(t.forwardReports,Ke(fo),"Forward Reports");if(n&&o&&s)return t.forwardErrorsToLogs&&!o.includes(e.error)&&o.push(e.error),{forwardErrorsToLogs:!1!==t.forwardErrorsToLogs,forwardConsoleLogs:o,forwardReports:s,requestErrorResponseLengthLimit:32768,...n}}(t);o&&(l=o,fn().subscribe(T),n.tryToInit(o.trackingConsent),f())},get initConfiguration(){return u},globalContext:i,accountContext:a,userContext:c,getInternalContext:T,handleLog(e,n,o,r=t(),i=Z()){s.add(t=>t.handleLog(e,n,o,r,i))}}}function vo(){let e="",t=0;return{isAsync:!1,get isEmpty(){return!e},write(n,o){const r=ie(n);t+=r,e+=n,o&&o(r)},finish(e){e(this.finishSync())},finishSync(){const n={output:e,outputBytesCount:t,rawBytesCount:t,pendingData:""};return e="",t=0,n},estimateEncodedBytesCount(e){return e.length}}}function wo(){return Boolean(window._DATADOG_SYNTHETICS_INJECTS_RUM||kn("datadog-synthetics-injects-rum"))}function So(){const e=window._DATADOG_SYNTHETICS_PUBLIC_ID||kn("datadog-synthetics-public-id");return"string"==typeof e?e:void 0}function ko(){const e=window._DATADOG_SYNTHETICS_RESULT_ID||kn("datadog-synthetics-result-id");return"string"==typeof e?e:void 0}function xo(){return Boolean(So()&&ko())}const Co=1/0;let _o=null;const Eo=new Set;function To({expireDelay:e,maxEntries:t}){let n=[];_o||(_o=_(()=>{Eo.forEach(e=>e())},6e4));const o=()=>{const t=Y()-e;for(;n.length>0&&n[n.length-1].endTime<t;)n.pop()};return Eo.add(o),{add:function(e,o){const r={value:e,startTime:o,endTime:Co,remove:()=>{Ge(n,r)},close:e=>{r.endTime=e}};return t&&n.length>=t&&n.pop(),n.unshift(r),r},find:function(e=Infinity,t={returnInactive:!1}){for(const o of n)if(o.startTime<=e){if(t.returnInactive||e<=o.endTime)return o.value;break}},closeActive:function(e){const t=n[0];t&&t.endTime===Co&&t.close(e)},findAll:function(e=Infinity,t=0){const o=te(e,t);return n.filter(t=>t.startTime<=o&&e<=t.endTime).map(e=>e.value)},reset:function(){n=[]},stop:function(){Eo.delete(o),0===Eo.size&&_o&&(E(_o),_o=null)}}}const $o=V,Ro=_n;let Oo=[];function Lo(e,t,n,o){const r=new h,s=new h,i=to(e.sessionStoreStrategyType,e,t,n);Oo.push(()=>i.stop());const a=To({expireDelay:Ro});function c(){const e=i.getSession();return e?{id:e.id,trackingType:e[t],isReplayForced:!!e.forcedReplay,anonymousId:e.anonymousId}:(async function(){const e=Nn();let t=[];t="cookieStore"in window?await window.cookieStore.getAll("_dd_s"):document.cookie.split(/\s*;\s*/).filter(e=>e.startsWith("_dd_s"));kt("Unexpected session state",{session:e,isSyntheticsTest:xo(),createdTimestamp:null==e?void 0:e.created,expireTimestamp:null==e?void 0:e.expire,cookie:{count:t.length,...t}})}().catch(()=>{}),{id:"invalid",trackingType:"0",isReplayForced:!1,anonymousId:void 0})}return Oo.push(()=>a.stop()),i.renewObservable.subscribe(()=>{a.add(c(),Y()),r.notify()}),i.expireObservable.subscribe(()=>{s.notify(),a.closeActive(Y())}),i.expandOrRenewSession(),a.add(c(),[0,re()][0]),o.observable.subscribe(()=>{o.isGranted()?i.expandOrRenewSession():i.expire()}),function(e,t){const{stop:n}=Ze(e,window,["click","touchstart","keydown","scroll"],t,{capture:!0,passive:!0});Oo.push(n)}(e,()=>{o.isGranted()&&i.expandOrRenewSession()}),function(e,t){const n=()=>{"visible"===document.visibilityState&&t()},{stop:o}=Xe(e,document,"visibilitychange",n);Oo.push(o);const r=_(n,$o);Oo.push(()=>{E(r)})}(e,()=>i.expandSession()),function(e,t){const{stop:n}=Xe(e,window,"resume",t,{capture:!0});Oo.push(n)}(e,()=>i.restartSession()),{findSession:(e,t)=>a.find(e,t),renewObservable:r,expireObservable:s,sessionStateUpdateObservable:i.sessionStateUpdateObservable,expire:i.expire,updateSessionState:i.updateSessionState}}function Ao(e,t){return"0"===(n=t)||"1"===n?t:qe(e.sessionSampleRate)?"1":"0";var n}function Io(e,t,n,o,r){const s=Vt.concat(["custom"]),i={};s.forEach(t=>{i[t]=function(e,t,n){let o=0,r=!1;return{isLimitReached(){if(0===o&&x(()=>{o=0},V),o+=1,o<=t||r)return r=!1,!1;if(o===t+1){r=!0;try{n({message:`Reached max number of ${e}s by minute: ${t}`,source:we,startClocks:Q()})}finally{r=!1}}return!0}}}(t,e.eventRateLimiterThreshold,r)}),t.subscribe(0,({rawLogsEvent:r,messageContext:s,savedCommonContext:a,domainContext:c})=>{var u,l;const d=ne(r.date),f=a||o(),p=n.triggerHook(0,{startTime:d});if(p===nn)return;const g=He({view:f.view},p,r,s);!1===(null===(u=e.beforeSend)||void 0===u?void 0:u.call(e,g,c))||g.origin!==we&&(null!==(l=i[g.status])&&void 0!==l?l:i.custom).isLimitReached()||t.notify(1,g)})}let Po={};function Do(n){return v(...n.map(n=>(Po[n]||(Po[n]=function(n){return new h(o=>{const r=t[n];return t[n]=(...t)=>{r.apply(console,t);const s=H("console error");p(()=>{o.notify(function(t,n,o){const r=t.map(e=>function(e){if("string"==typeof e)return ue(e);if(he(e))return G(R(e));return ae(ue(e),void 0,2)}(e)).join(" ");if(n===e.error){const e=ge({originalError:t.find(he),handlingStack:o,startClocks:Q(),source:Se,handling:"handled",nonErrorPrefix:"Provided",useFallbackStack:!1});return e.message=r,{api:n,message:r,handlingStack:o,error:e}}return{api:n,message:r,error:void 0,handlingStack:o}}(t,n,s))})},()=>{t[n]=r}})}(n)),Po[n])))}const Bo={[e.log]:Ft.info,[e.debug]:Ft.debug,[e.info]:Ft.info,[e.warn]:Ft.warn,[e.error]:Ft.error};let Uo;const jo=new WeakMap;function qo(e){return Uo||(Uo=function(e){return new h(t=>{const{stop:n}=W(XMLHttpRequest.prototype,"open",Mo),{stop:o}=W(XMLHttpRequest.prototype,"send",n=>{!function({target:e,handlingStack:t},n,o){const r=jo.get(e);if(!r)return;const s=r;s.state="start",s.startClocks=Q(),s.isAborted=!1,s.xhr=e,s.handlingStack=t;let i=!1;const{stop:a}=W(e,"onreadystatechange",()=>{e.readyState===XMLHttpRequest.DONE&&c()}),c=()=>{if(u(),a(),i)return;i=!0;const t=r;var n;t.state="complete",t.duration=ee(s.startClocks.timeStamp,Z()),t.status=e.status,o.notify((n=t,{...n}))},{stop:u}=Xe(n,e,"loadend",c);o.notify(s)}(n,e,t)},{computeHandlingStack:!0}),{stop:r}=W(XMLHttpRequest.prototype,"abort",No);return()=>{n(),o(),r()}})}(e)),Uo}function Mo({target:e,parameters:[t,n]}){jo.set(e,{state:"open",method:String(t).toUpperCase(),url:an(String(n))})}function No({target:e}){const t=jo.get(e);t&&(t.isAborted=!0)}const Fo={FETCH:"fetch",XHR:"xhr"};function Ho(e,t){if(!e.forwardErrorsToLogs)return{stop:T};const n=qo(e).subscribe(e=>{"complete"===e.state&&r(Fo.XHR,e)}),o=fn().subscribe(e=>{"resolve"===e.state&&r(Fo.FETCH,e)});function r(n,o){var r;function s(e){const r={isAborted:o.isAborted,handlingStack:o.handlingStack};t.notify(0,{rawLogsEvent:{message:`${Go(n)} error ${o.method} ${o.url}`,date:o.startClocks.timeStamp,error:{stack:e||"Failed to load",handling:void 0},http:{method:o.method,status_code:o.status,url:o.url},status:Ft.error,origin:xe},domainContext:r})}r=o.url,Ue.every(e=>r.includes(e))||!function(e){return 0===e.status&&"opaque"!==e.responseType}(o)&&!tt(o.status)||("xhr"in o?function(e,t,n){"string"==typeof e.response?n(zo(e.response,t)):n(e.response)}(o.xhr,e,s):o.response?function(e,t,n){const o=function(e){try{return e.clone()}catch(e){return}}(e);o&&o.body?window.TextDecoder?function(e,t,n){!function(e,t,n){const o=e.getReader(),r=[];let s=0;function i(){let e,i;if(o.cancel().catch(T),n.collectStreamBody){let t;if(1===r.length)t=r[0];else{t=new Uint8Array(s);let e=0;r.forEach(n=>{t.set(n,e),e+=n.length})}e=t.slice(0,n.bytesLimit),i=t.length>n.bytesLimit}t(void 0,e,i)}!function e(){o.read().then(f(t=>{t.done?i():(n.collectStreamBody&&r.push(t.value),s+=t.value.length,s>n.bytesLimit?i():e())}),f(e=>t(e)))}()}(e,(e,t,o)=>{if(e)n(e);else{let e=(new TextDecoder).decode(t);o&&(e+="..."),n(void 0,e)}},{bytesLimit:t,collectStreamBody:!0})}(o.body,t.requestErrorResponseLengthLimit,(e,t)=>{n(e?`Unable to retrieve response: ${e}`:t)}):o.text().then(f(e=>n(zo(e,t))),f(e=>n(`Unable to retrieve response: ${e}`))):n()}(o.response,e,s):o.error&&function(e,t,n){n(zo(z(R(e)),t))}(o.error,e,s))}return{stop:()=>{n.unsubscribe(),o.unsubscribe()}}}function zo(e,t){return e.length>t.requestErrorResponseLengthLimit?`${e.substring(0,t.requestErrorResponseLengthLimit)}...`:e}function Go(e){return Fo.XHR===e?"XHR":"Fetch"}const Wo=class{constructor(){this.callbacks={}}notify(e,t){const n=this.callbacks[e];n&&n.forEach(e=>e(t))}subscribe(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),{unsubscribe:()=>{this.callbacks[e]=this.callbacks[e].filter(e=>t!==e)}}}};function Jo(e){return{handleLog:function(o,r,s,i,a){const c=He(r.getContext(),o.context);if(Nt(o.status,Wt,r)&&function({status:e,message:o},r){n[Vo[e]].call(t,o,r)}(o,c),Nt(o.status,Jt,r)){const t={rawLogsEvent:{date:a||Z(),message:o.message,status:o.status,origin:ke},messageContext:c,savedCommonContext:i};s&&(t.domainContext={handlingStack:s}),e.notify(0,t)}}}}const Vo={[Ft.ok]:e.debug,[Ft.debug]:e.debug,[Ft.info]:e.info,[Ft.notice]:e.info,[Ft.warn]:e.warn,[Ft.error]:e.error,[Ft.critical]:e.error,[Ft.alert]:e.error,[Ft.emerg]:e.error};const Ko=function(){const e={};return{register(t,n){return e[t]||(e[t]=[]),e[t].push(n),{unregister:()=>{e[t]=e[t].filter(e=>e!==n)}}},triggerHook(t,n){const o=e[t]||[],r=[];for(const e of o){const t=e(n);if(t===nn)return nn;t!==on&&r.push(t)}return He(...r)}}};const Xo="logs";const Zo=function(e){const t=function(e){const t=new h;return{tryToInit(t){e||(e=t)},update(n){e=n,t.notify()},isGranted(){return e===S.GRANTED},observable:t}}(),n=function(e=Ee){const t=new w(500),n=e().subscribe(e=>{t.notify({type:0,error:e})});return{observable:t,stop:()=>{n.unsubscribe()}}}().observable;let o=ho(Zt,t,(r,s)=>{const i=e(s,Zt,t,n);return o=function(e,t){return{init:e=>{Ut("DD_LOGS",e)},initConfiguration:e,...t}}(r,i),i});const r=()=>o,s={};return function(e){const t={version:"6.14.0",onReady(e){e()},...e};return Object.defineProperty(t,"_setDebug",{get(){return d},enumerable:!1}),t}({logger:new Kt((...e)=>o.handleLog(...e)),init:f(e=>o.init(e)),setTrackingConsent:f(e=>{t.update(e),Ct({feature:"set-tracking-consent",tracking_consent:e})}),getGlobalContext:Tt(r,Ot,At),setGlobalContext:Tt(r,Ot,It),setGlobalContextProperty:Tt(r,Ot,Pt),removeGlobalContextProperty:Tt(r,Ot,Dt),clearGlobalContext:Tt(r,Ot,Bt),createLogger:f((e,t={})=>(s[e]=new Kt((...e)=>o.handleLog(...e),ue(e),t.handler,t.level,ue(t.context)),s[e])),getLogger:f(e=>s[e]),getInitConfiguration:f(()=>Fe(o.initConfiguration)),getInternalContext:f(e=>o.getInternalContext(e)),setUser:Tt(r,Rt,It),getUser:Tt(r,Rt,At),setUserProperty:Tt(r,Rt,Pt),removeUserProperty:Tt(r,Rt,Dt),clearUser:Tt(r,Rt,Bt),setAccount:Tt(r,Lt,It),getAccount:Tt(r,Lt,At),setAccountProperty:Tt(r,Lt,Pt),removeAccountProperty:Tt(r,Lt,Dt),clearAccount:Tt(r,Lt,Bt)})}(function(e,t,n,o){const r=new Wo,s=Ko(),i=[];r.subscribe(1,e=>je("logs",e));const a=function(e){return t=>{e.notify(0,{rawLogsEvent:{message:t.message,date:t.startClocks.timeStamp,origin:we,status:Ft.error}}),kt("Error reported to customer",{"error.message":t.message})}}(r),c=function(e){return new h(t=>{const{stop:n}=Ze(e,window,["visibilitychange","freeze"],e=>{"visibilitychange"===e.type&&"hidden"===document.visibilityState?t.notify({reason:Ye.HIDDEN}):"freeze"===e.type&&t.notify({reason:Ye.FROZEN})},{capture:!0}),o=Xe(e,window,"beforeunload",()=>{t.notify({reason:Ye.UNLOADING})}).stop;return()=>{n(),o()}})}(e),u=St("browser-logs-sdk",e,s,a,c,vo);i.push(u.stop);const l=!e.sessionStoreStrategyType||Ve()||wo()?function(e){const t="1"===Ao(e)?{}:void 0;return{findTrackedSession:()=>t,expireObservable:new h}}(e):function(e,t){const n=Lo(e,"logs",t=>Ao(e,t),t);return{findTrackedSession:(e,t={returnInactive:!1})=>{const o=n.findSession(e,t);return o&&"1"===o.trackingType?{id:o.id,anonymousId:o.anonymousId}:void 0},expireObservable:n.expireObservable}}(e,n);!function(e,t,n){e.register(0,({startTime:e})=>{const o=n.findTrackedSession(e);return n.findTrackedSession(e,{returnInactive:!0})?{service:t.service,session_id:o?o.id:void 0,session:o?{id:o.id}:void 0}:nn}),e.register(1,({startTime:e})=>{const t=n.findTrackedSession(e);return t&&t.id?{session:{id:t.id}}:on})}(s,e,l);const d=function(e,t,n){const o=rn();return t.storeContextsAcrossPages&&en(t,o,n,4),e.register(0,()=>{const e=o.getContext();return $e(e)||!e.id?on:{account:e}}),o}(s,e,Xo),f=function(e,t,n,o){const r=sn();return t.storeContextsAcrossPages&&en(t,r,o,1),e.register(0,({eventType:e,startTime:o})=>{const s=r.getContext(),i=n.findTrackedSession(o);return i&&i.anonymousId&&!s.anonymous_id&&t.trackAnonymousUser&&(s.anonymous_id=i.anonymousId),$e(s)?on:{type:e,usr:s}}),e.register(1,({startTime:e})=>{var t;return{anonymous_id:null===(t=n.findTrackedSession(e))||void 0===t?void 0:t.anonymousId}}),r}(s,e,l,Xo),p=function(e,t,n,o){const r=tn();return t.storeContextsAcrossPages&&en(t,r,n,2),e.register(0,()=>{const e=r.getContext();return o?{context:e}:e}),r}(s,e,Xo,!1),{stop:g}=function(e){const t=window;let n=!1;function o(e){const o=wo(),r=function(e,t){if(t&&t.getInternalContext)return t.getInternalContext(e)}(e,o?t.DD_RUM_SYNTHETICS:t.DD_RUM);if(r)return r;o&&!n&&(n=!0,kt("Logs sent before RUM is injected by the synthetics worker",{testId:So(),resultId:ko()}))}return e.register(0,({startTime:e})=>o(e)||on),e.register(1,({startTime:e})=>{var t,n;const r=o(e);return r?{application:{id:r.application_id},view:{id:null===(t=r.view)||void 0===t?void 0:t.id},action:{id:null===(n=r.user_action)||void 0===n?void 0:n.id}}:on}),{stop:()=>{n=!1}}}(s);Ho(e,r),function(e,t,n){if(!e.forwardErrorsToLogs)return{stop:T};const o=n.subscribe(e=>{if(0===e.type){const n=e.error;t.notify(0,{rawLogsEvent:{message:n.message,date:n.startClocks.timeStamp,error:zt(n),origin:Ce,status:Ft.error},messageContext:n.context})}})}(e,r,o),o.unbuffer(),function(e,t){const n=Do(e.forwardConsoleLogs).subscribe(e=>{var n;const o={rawLogsEvent:{date:Z(),message:e.message,origin:Se,error:e.error&&zt(e.error),status:Bo[e.api]},messageContext:null===(n=e.error)||void 0===n?void 0:n.context,domainContext:{handlingStack:e.handlingStack}};t.notify(0,o)})}(e,r),function(e,t){const n=po(e,e.forwardReports).subscribe(e=>{let n,o=e.message;const r="deprecation"===e.originalError.type?Ft.warn:Ft.error;var s,i;r===Ft.error?n=zt(e):e.stack&&(o+=` Found in ${s=e.stack,null===(i=/@ (.+)/.exec(s))||void 0===i?void 0:i[1]}`),t.notify(0,{rawLogsEvent:{date:Z(),message:o,origin:_e,error:n,status:r}})})}(e,r);const{handleLog:m}=Jo(r);if(Io(e,r,s,t,a),Ve())!function(e){const t=Je();e.subscribe(1,e=>{t.send("log",e)})}(r);else{const{stop:t}=function(e,t,n,o,r){const s=pt(e,{endpoint:e.logsEndpointBuilder,encoder:vo()},e.replica&&{endpoint:e.replica.logsEndpointBuilder,encoder:vo()},n,o,r.expireObservable);return t.subscribe(1,e=>{s.add(e)}),s}(e,r,a,c,l);i.push(()=>t())}var y;return{handleLog:m,getInternalContext:(y=l,{get:e=>{const t=y.findTrackedSession(e);if(t)return{session_id:t.id}}}).get,accountContext:d,globalContext:p,userContext:f,stop:()=>{i.forEach(e=>e()),g()}}});!function(e,t,n){const o=e[t];o&&!o.q&&o.version&&r.warn("SDK is loaded more than once. This is unsupported and might have unexpected behavior."),e[t]=n,o&&o.q&&o.q.forEach(e=>c(e,"onReady callback threw an error:")())}(y(),"DD_LOGS",Zo);const Yo={token:"puba72873a87fe0e826394ed87d5793eb65",sessionSampleRate:10,blacklist:["ten_basket"]};function Qo(){let e=0,t=null;return n=>(null==n?void 0:n.message)!==t&&(t=null==n?void 0:n.message,e++,e<=50)}(async function(){const e={"media.abcya.com":"prod","content-staging.abcya.com":"staging"};let t="unknown",n="unknown";try{const s=new URL(document.URL),i=e[s.hostname.toLowerCase()];if(!i)return;let a="staging"===i?100:Yo.sessionSampleRate;const c=await fetch("assets/json/gameInfo.json");if(c.ok){var o;const e=await c.json();var r;if(n=(null==e?void 0:e.gameVersion)||n,t=(null==e?void 0:e.gameShortName)||t,void 0!==(null==e||null===(o=e.analytics)||void 0===o?void 0:o.logSampleRate))a=null==e||null===(r=e.analytics)||void 0===r?void 0:r.logSampleRate}else{const e=s.pathname.split("/");t=e.length>2?e[2]:t}if(0===a||Yo.blacklist.includes(t))return void console.log("ABCya DD disabled");Zo.init({clientToken:Yo.token,site:"datadoghq.com",forwardErrorsToLogs:!0,sessionSampleRate:a,service:"game",version:`${t}:${n}`,env:i,beforeSend:Qo()}),console.log(`ABCya DD initialized: ${t}:${n} (sample rate: ${a}%)`)}catch(e){console.log(`ABCya DD init error: ${t}:${n}`,e)}})();if(window.parent.location!==window.location){const e=5e3,t=30,n=500,o=1e3;let r=0,s=0,i=1;const a=e=>{window.focus(),r++},c=()=>{document.hasFocus()&&(s+=o)},u=e=>{document.hasFocus()&&r++},l=()=>{const t={id:0,source:"game",type:"analytics",payload:{interactionTotalCount:r,hasFocus:document.hasFocus(),focusTime:s,intervalTime:e,origin:window.location.origin,pathname:window.location.pathname}};window.parent.postMessage(t,"*")};let d;const f=()=>{d=document.getElementsByTagName("canvas")[0],!d&&i<=1e3*t/n?setTimeout(()=>{i++,f()},n):d?(d.addEventListener("touchend",a),d.addEventListener("click",a),document.addEventListener("keyup",u),l(),setInterval(l,e),setInterval(c,o)):console.warn(`Failed to get game canvas and exceeded retry limit of: ${t} seconds`)};f()}}();